{
  "info": {
    "_postman_id": "60c7daea-8e65-4747-9b01-783ad1588e84",
    "name": "Pankhuri Backend API",
    "description": "## Pankhuri Learning Management System API\n\n**Base URL:** http://localhost:8080\n\n**Last Updated:** November 2025\n\n### Overview:\n\nComplete REST API for a Learning Management System with hierarchical content structure, progress tracking, and comprehensive admin controls.\n\n### Key Features:\n\n- **Authentication:** Google OAuth, Phone OTP, Admin login\n- **User Management:** User profiles, trainer management, role-based access\n- **Content Hierarchy:** Categories â†’ Courses â†’ Modules â†’ Lessons (Video/Text)\n- **Progress Tracking:** Automatic calculation, lesson completion, course analytics\n- **Rich Content:** Lesson descriptions (Markdown), file attachments, video integration\n- **Session Management:** Multi-device sessions, secure logout\n- **Admin Controls:** All CRUD operations organized in dedicated subfolders\n\n### Collection Structure:\n\nEndpoints are organized by resource with clear separation:\n- **Public Endpoints:** At root level (GET operations, user-facing)\n- **Admin Endpoints:** In \"Admin\" subfolders (CRUD, management operations)\n\n### Authentication:\n\n**Bearer Token:** Most endpoints require authentication\n\n**Auto-saved Variables:**\n- Login endpoints automatically save {{authToken}} and {{userId}}\n- All requests use {{authToken}} in Authorization header\n- Create operations save resource IDs (categoryId, courseId, etc.)\n\n**Quick Auth Flow:**\n1. POST /api/auth/google-verify OR /api/auth/phone\n2. Token saved to {{authToken}} automatically\n3. All subsequent requests authenticated\n\n### Enum Reference:\n\n**Gender:** male, female, other, prefer_not_to_say\n\n**UserStatus:** active (normal), inactive (disabled), suspended (banned)\n\n**UserRole:** user (regular), admin (full access)\n\n**CourseLevel:** beginner, intermediate, advanced, expert\n\n**CourseStatus:** active (published), inactive (draft), archived (hidden)\n\n**LessonType:** video (video content), text (article/markdown)\n\n**LessonStatus:** draft (WIP), published (live, counts for progress), archived (hidden)\n\n**ModuleStatus:** draft, published, archived\n\n**VideoStatus:** draft, processing, published, failed\n\n### Progress System:\n\n**How it works:**\n- Tracks individual lesson completion (with video timestamps)\n- Auto-calculates course progress: (completed / total published) Ã— 100\n- Only PUBLISHED lessons count toward progress\n- Triggers recalculation when admins add/delete/change lessons\n\n**Key Behaviors:**\n- Adding lessons â†’ Progress drops for all users\n- Deleting lessons â†’ Progress entries removed, course recalculated\n- Status changes â†’ Progress updates automatically\n- Certificates â†’ NOT revoked when progress drops\n- Module moves â†’ No impact (progress is lesson-based)\n\n**Endpoints:**\n- User: Mark complete, update timestamp, view progress\n- Admin: Analytics, bulk reset, recalculate all users\n\n### Review System:\n\n**How it works:**\n- One review per user per course (enforced by unique constraint)\n- Rating: Required, integer 1-5 stars\n- Review Text: Optional, max 1000 characters\n- Cached statistics: averageRating and totalReviews stored in Course table\n- Auto-recalculates: Course stats update on every review create/update/delete\n\n**Key Features:**\n- Upsert pattern: POST creates or updates existing review\n- Optional auth: GET endpoints work without token (enhanced with user data when authenticated)\n- Pagination: Default 10, max 50 per page\n- Sorting: newest, oldest, highest, lowest\n- User separation: Authenticated user's review shown first in list\n- Rating distribution: 1-5 star breakdown with counts and percentages\n\n**Endpoints:**\n- Public: Browse reviews, view stats (no auth required)\n- Authenticated: Create, update, delete own review\n- Admin: Delete any review (moderation)\n\n### Content Hierarchy:\n\n```\nCategory (e.g., \"Yoga\")\n  â””â”€ Course (e.g., \"Beginner Yoga\")\n      â”œâ”€ Direct Lesson (moduleId = null)\n      â””â”€ Module (e.g., \"Introduction\")\n          â””â”€ Lesson (video or text)\n              â”œâ”€ Description (Markdown, one-to-one)\n              â””â”€ Attachments (PDFs, images, docs)\n```\n\n**Important:** Every lesson has courseId. moduleId is optional (null for direct lessons).\n\n### API Organization:\n\n**14 Main Sections:**\n1. Health Check\n2. Authentication (Google, Phone, Admin)\n3. Users (profile operations)\n4. Trainers (Public) - Browse trainers\n5. Admin - User Management\n6. Admin - Trainer Management\n7. Categories (public + Admin subfolder)\n8. Courses (public + Admin subfolder)\n9. Course Reviews (public GET + authenticated CRUD + admin moderation)\n10. Modules (public + Admin subfolder)\n11. Lessons (public + Admin with Descriptions/Attachments subfolders)\n12. Sessions (user + admin)\n13. Progress Tracking (user + Admin subfolder)\n14. Videos (Admin subfolder - all admin-only)\n\n### Collection Variables:\n\n**Auto-saved on creation:**\n- authToken - JWT authentication token\n- userId - Current user ID\n- trainerId - Trainer profile ID\n- categoryId - Category ID\n- courseId - Course ID\n- moduleId - Module ID\n- lessonId - Lesson ID\n- videoId - Video ID\n- attachmentId - Attachment ID\n- reviewId - Review ID (for admin moderation)\n\n### Quick Start Guide:\n\n**For Frontend Developers:**\n1. Import collection into Postman\n2. Set {{baseUrl}} = http://localhost:8080\n3. Login with /api/auth/google-verify\n4. Browse public endpoints (GET operations at root)\n5. For admin features, check \"Admin\" subfolders\n\n**For Testing:**\n1. Health Check â†’ Verify server running\n2. Admin Login â†’ Get admin token\n3. Create test data (Category â†’ Course â†’ Module â†’ Lesson)\n4. Test progress tracking\n5. Browse user-facing endpoints\n\n### Important Notes:\n\n- **Port:** Server runs on 8080 (not 3000)\n- **Progress:** Only published lessons count\n- **Cascading:** Deleting parent deletes children (use with caution)\n- **Sequences:** Use bulk update for drag-and-drop reordering\n- **Descriptions:** Support full Markdown formatting\n- **Attachments:** Upload files to storage first, then save metadata\n- **Admin Access:** Clearly separated in subfolders for easy identification",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "27592795",
    "_collection_link": "https://devs-09069ab9-6199077.postman.co/workspace/devlopers's-Team's-Workspace~4b317406-0f97-4c6e-89ff-a3482b26c70c/collection/27592795-60c7daea-8e65-4747-9b01-783ad1588e84?action=share&source=collection_link&creator=27592795"
  },
  "item": [
    {
      "name": "Health Check",
      "item": [
        {
          "name": "Ping Server",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/ping",
              "host": ["{{baseUrl}}"],
              "path": ["ping"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Google Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('authToken', response.data.token);",
                  "    pm.collectionVariables.set('userId', response.data.user.id);",
                  "    console.log('Auth token saved:', response.data.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"idToken\": \"your-google-id-token-here\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/google-verify",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "google-verify"]
            },
            "description": "Authenticate using Google OAuth token"
          },
          "response": []
        },
        {
          "name": "Phone Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('authToken', response.data.token);",
                  "    pm.collectionVariables.set('userId', response.data.user.id);",
                  "    console.log('Auth token saved:', response.data.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"idToken\": \"your-firebase-id-token-here\",\n    \"countryCode\": \"+91\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/phone-verify",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "phone-verify"]
            },
            "description": "Authenticate using Firebase phone authentication"
          },
          "response": []
        },
        {
          "name": "Google Admin Verify",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('authToken', response.data.token);",
                  "    pm.collectionVariables.set('userId', response.data.user.id);",
                  "    console.log('Auth token saved:', response.data.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"admin_mail\": \"enter-your-email-here\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/google-verify-admin",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "google-verify-admin"]
            },
            "description": "Authenticate admin using Google OAuth token"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get Current User Profile",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "me"]
            },
            "description": "Get current authenticated user's profile (requires authentication)"
          },
          "response": []
        },
        {
          "name": "Update Current User Profile",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"displayName\": \"John Doe\",\n    \"profileImage\": \"https://example.com/profile.jpg\",\n    \"dateOfBirth\": \"1990-01-15\",\n    \"gender\": \"male\",\n    \"countryCode\": \"+1\",\n    \"languagePreference\": \"en\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "me"]
            },
            "description": "Update current user's profile (requires authentication)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Trainers (Public)",
      "item": [
        {
          "name": "Get All Trainers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/trainers?search=&page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "trainers"],
              "query": [
                {
                  "key": "search",
                  "value": "",
                  "description": "Search by name or bio"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "Get all active trainers (public endpoint)"
          },
          "response": []
        },
        {
          "name": "Get Trainer by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/trainers/{{trainerId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "trainers", "{{trainerId}}"]
            },
            "description": "Get trainer details by ID (public endpoint)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin - User Management",
      "item": [
        {
          "name": "Get All Users",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/users?page=1&limit=50&role=user&status=active&search=",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                },
                {
                  "key": "role",
                  "value": "user",
                  "description": "user | admin | moderator"
                },
                {
                  "key": "status",
                  "value": "active",
                  "description": "active | inactive | suspended"
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search by name, email, or phone"
                }
              ]
            },
            "description": "Get all users with filters (Admin only)"
          },
          "response": []
        },
        {
          "name": "Get User by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "users", "{{userId}}"]
            },
            "description": "Get user details by ID (Admin only)"
          },
          "response": []
        },
        {
          "name": "Create User",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"user@example.com\",\n    \"phone\": \"+1234567890\",\n    \"displayName\": \"John Doe\",\n    \"profileImage\": \"https://example.com/profile.jpg\",\n    \"dateOfBirth\": \"1990-01-15\",\n    \"gender\": \"male\",\n    \"countryCode\": \"+1\",\n    \"role\": \"user\",\n    \"status\": \"active\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "users"]
            },
            "description": "Create a new user (Admin only)"
          },
          "response": []
        },
        {
          "name": "Update User",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"displayName\": \"John Doe Updated\",\n    \"role\": \"moderator\",\n    \"status\": \"active\",\n    \"hasUsedTrial\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "users", "{{userId}}"]
            },
            "description": "Update user details (Admin only)"
          },
          "response": []
        },
        {
          "name": "Delete User",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "users", "{{userId}}"]
            },
            "description": "Delete user (Admin only). Users with courses will be suspended instead."
          },
          "response": []
        },
        {
          "name": "Update User Status",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"suspended\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/users/{{userId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "users", "{{userId}}", "status"]
            },
            "description": "Update user status: active | inactive | suspended (Admin only)"
          },
          "response": []
        },
        {
          "name": "Update User Role",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"role\": \"admin\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/users/{{userId}}/role",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "users", "{{userId}}", "role"]
            },
            "description": "Update user role: user | admin | moderator (Admin only)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin - Trainer Management",
      "item": [
        {
          "name": "Get All Trainers",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/trainers?status=active&search=&page=1&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "trainers"],
              "query": [
                {
                  "key": "status",
                  "value": "active",
                  "description": "active | inactive"
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search by name or bio"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            },
            "description": "Get all trainers with filters (Admin only)"
          },
          "response": []
        },
        {
          "name": "Get Trainer by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/trainers/{{trainerId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "trainers", "{{trainerId}}"]
            },
            "description": "Get trainer details by ID (Admin only)"
          },
          "response": []
        },
        {
          "name": "Create Trainer Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('trainerId', response.data.id);",
                  "    console.log('Trainer ID saved:', response.data.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"userId\": \"{{userId}}\",\n    \"bio\": \"Experienced yoga instructor with 10 years of teaching experience. Specialized in Hatha and Vinyasa yoga.\",\n    \"specialization\": [\"yoga\", \"meditation\", \"pranayama\", \"wellness\"],\n    \"experience\": 10,\n    \"socialLinks\": {\n        \"linkedin\": \"https://linkedin.com/in/johndoe\",\n        \"instagram\": \"@johndoe_yoga\",\n        \"twitter\": \"@johndoe\",\n        \"website\": \"https://johndoe.com\"\n    }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/trainers",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "trainers"]
            },
            "description": "Create trainer profile for a user (Admin only)"
          },
          "response": []
        },
        {
          "name": "Update Trainer Profile",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"bio\": \"Updated bio with more experience\",\n    \"specialization\": [\"yoga\", \"meditation\", \"fitness\"],\n    \"experience\": 12,\n    \"status\": \"active\",\n    \"socialLinks\": {\n        \"linkedin\": \"https://linkedin.com/in/johndoe-updated\",\n        \"instagram\": \"@johndoe_yoga_updated\"\n    }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/trainers/{{trainerId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "trainers", "{{trainerId}}"]
            },
            "description": "Update trainer profile (Admin only)"
          },
          "response": []
        },
        {
          "name": "Delete Trainer Profile",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/admin/trainers/{{trainerId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "admin", "trainers", "{{trainerId}}"]
            },
            "description": "Delete trainer profile (Admin only). Cannot delete if trainer has associated courses."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Categories",
      "item": [
        {
          "name": "Get All Categories (Tree)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/categories?status=active",
              "host": ["{{baseUrl}}"],
              "path": ["api", "categories"],
              "query": [
                {
                  "key": "status",
                  "value": "active",
                  "description": "active | inactive"
                }
              ]
            },
            "description": "Get hierarchical category tree structure"
          },
          "response": []
        },
        {
          "name": "Get Flat Categories",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/categories/flat?page=1&limit=20&status=active&search=",
              "host": ["{{baseUrl}}"],
              "path": ["api", "categories", "flat"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "active",
                  "description": "active | inactive"
                },
                {
                  "key": "search",
                  "value": ""
                }
              ]
            },
            "description": "Get flat list of categories with pagination"
          },
          "response": []
        },
        {
          "name": "Get Category by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/categories/{{categoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "categories", "{{categoryId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get Category by Slug",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/categories/slug/yoga-basics",
              "host": ["{{baseUrl}}"],
              "path": ["api", "categories", "slug", "yoga-basics"]
            }
          },
          "response": []
        },
        {
          "name": "Get Child Categories",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/categories/{{categoryId}}/children",
              "host": ["{{baseUrl}}"],
              "path": ["api", "categories", "{{categoryId}}", "children"]
            }
          },
          "response": []
        },
        {
          "name": "Admin",
          "item": [
            {
              "name": "Create Category",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('categoryId', response.data.id);",
                      "    console.log('Category ID saved:', response.data.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Yoga Basics\",\n    \"slug\": \"yoga-basics\",\n    \"description\": \"Introduction to yoga and basic poses\",\n    \"icon\": \"ðŸ§˜\",\n    \"status\": \"active\",\n    \"sequence\": 1,\n    \"parentId\": null\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/categories",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "categories"]
                },
                "description": "Create a new category (Admin only)"
              },
              "response": []
            },
            {
              "name": "Update Category",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Yoga Basics Updated\",\n    \"description\": \"Updated description for yoga basics\",\n    \"status\": \"active\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/categories/{{categoryId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "categories", "{{categoryId}}"]
                },
                "description": "Update category (Admin only)"
              },
              "response": []
            },
            {
              "name": "Delete Category",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/categories/{{categoryId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "categories", "{{categoryId}}"]
                },
                "description": "Delete category (Admin only)"
              },
              "response": []
            },
            {
              "name": "Update Category Sequence",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"sequence\": 5\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/categories/{{categoryId}}/sequence",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "categories", "{{categoryId}}", "sequence"]
                },
                "description": "Update category display sequence (Admin only)"
              },
              "response": []
            },
            {
              "name": "Toggle Category Status",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"status\": \"inactive\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/categories/{{categoryId}}/status",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "categories", "{{categoryId}}", "status"]
                },
                "description": "Toggle category status: active | inactive (Admin only)"
              },
              "response": []
            }
          ]
        }
      ]
    },
    {
      "name": "Courses",
      "item": [
        {
          "name": "Get All Courses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses?page=1&limit=20&status=active&level=beginner&language=en&sort=newest",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "categoryId",
                  "value": "{{categoryId}}",
                  "disabled": true
                },
                {
                  "key": "trainerId",
                  "value": "{{userId}}",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "active",
                  "description": "active | inactive | archived"
                },
                {
                  "key": "level",
                  "value": "beginner",
                  "description": "beginner | intermediate | advanced | expert"
                },
                {
                  "key": "language",
                  "value": "en"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "tags",
                  "value": "yoga,meditation",
                  "disabled": true
                },
                {
                  "key": "sort",
                  "value": "newest",
                  "description": "newest | popular | rating | title"
                }
              ]
            },
            "description": "Get all courses with filters and pagination"
          },
          "response": []
        },
        {
          "name": "Get Trending Courses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/trending?limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses", "trending"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Get trending courses based on rating"
          },
          "response": []
        },
        {
          "name": "Get Course by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/{{courseId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses", "{{courseId}}"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Course by Slug",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/slug/yoga-for-beginners?userId={{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses", "slug", "yoga-for-beginners"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Related Courses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/{{courseId}}/related?limit=6",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses", "{{courseId}}", "related"],
              "query": [
                {
                  "key": "limit",
                  "value": "6"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Courses by Trainer",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/trainer/{{trainerId}}?includeUnpublished=false",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses", "trainer", "{{trainerId}}"],
              "query": [
                {
                  "key": "includeUnpublished",
                  "value": "false",
                  "description": "Include draft/inactive courses (default: false)"
                }
              ]
            },
            "description": "Get all courses by a specific trainer. Use trainerId from trainer profile."
          },
          "response": []
        },
        {
          "name": "Admin",
          "item": [
            {
              "name": "Create Course",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('courseId', response.data.id);",
                      "    console.log('Course ID saved:', response.data.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"title\": \"Yoga for Beginners\",\n    \"slug\": \"yoga-for-beginners\",\n    \"description\": \"Complete beginner's guide to yoga with step-by-step instructions\",\n    \"categoryId\": \"{{categoryId}}\",\n    \"trainerId\": \"{{trainerId}}\",\n    \"thumbnailImage\": \"https://example.com/thumbnail.jpg\",\n    \"coverImage\": \"https://example.com/cover.jpg\",\n    \"level\": \"beginner\",\n    \"duration\": 600,\n    \"language\": \"en\",\n    \"status\": \"active\",\n    \"hasCertificate\": false,\n    \"tags\": [\"yoga\", \"beginner\", \"wellness\"],\n    \"metadata\": {\n        \"instructor\": \"John Doe\",\n        \"difficulty\": \"Easy\"\n    }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/courses",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "courses"]
                },
                "description": "Create a new course (Admin only)"
              },
              "response": []
            },
            {
              "name": "Update Course",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"title\": \"Yoga for Beginners - Updated\",\n    \"description\": \"Updated description\",\n    \"duration\": 720,\n    \"status\": \"active\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/courses/{{courseId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "courses", "{{courseId}}"]
                },
                "description": "Update course (Admin only)"
              },
              "response": []
            },
            {
              "name": "Delete Course",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/courses/{{courseId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "courses", "{{courseId}}"]
                },
                "description": "Delete course (Admin only)"
              },
              "response": []
            },
            {
              "name": "Toggle Course Publish Status",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"status\": \"active\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/courses/{{courseId}}/publish",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "courses", "{{courseId}}", "publish"]
                },
                "description": "Publish or unpublish course (Admin only)"
              },
              "response": []
            }
          ]
        }
      ]
    },
    {
      "name": "Course Reviews",
      "item": [
        {
          "name": "Get Course Reviews",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/{{courseId}}/reviews?page=1&limit=10&sort=newest",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses", "{{courseId}}", "reviews"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page (default: 10, max: 50)"
                },
                {
                  "key": "sort",
                  "value": "newest",
                  "description": "newest | oldest | highest | lowest"
                }
              ]
            },
            "description": "Get paginated reviews for a course. Optional authentication - if authenticated, user's own review is separated and returned first. Returns reviews with user details, rating, review text, and timestamps."
          },
          "response": []
        },
        {
          "name": "Get Course Review Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/{{courseId}}/reviews/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses", "{{courseId}}", "reviews", "stats"]
            },
            "description": "Get review statistics for a course (public endpoint). Returns: averageRating, totalReviews, and ratingDistribution (1-5 star breakdown with counts and percentages)."
          },
          "response": []
        },
        {
          "name": "Create or Update Review",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"rating\": 5,\n    \"review\": \"Excellent course! The instructor explains concepts clearly and the practice sessions are very helpful. I've learned so much and feel much more confident in my yoga practice now. Highly recommended for beginners!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/courses/{{courseId}}/reviews",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses", "{{courseId}}", "reviews"]
            },
            "description": "Create a new review or update existing review (upsert). One review per user per course. Rating is required (1-5 integer). Review text is optional (max 1000 characters). Automatically recalculates course averageRating and totalReviews."
          },
          "response": []
        },
        {
          "name": "Update Review",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"rating\": 4,\n    \"review\": \"Updated my review after completing more modules. Great course overall, though some videos could be shorter. Still highly recommend!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/courses/{{courseId}}/reviews",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses", "{{courseId}}", "reviews"]
            },
            "description": "Update your existing review. Must have already created a review. Rating is optional (keeps existing if not provided). Review text is optional. Automatically recalculates course rating cache."
          },
          "response": []
        },
        {
          "name": "Delete Review",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/courses/{{courseId}}/reviews",
              "host": ["{{baseUrl}}"],
              "path": ["api", "courses", "{{courseId}}", "reviews"]
            },
            "description": "Delete your own review for a course. Automatically recalculates course averageRating and totalReviews. Cannot delete other users' reviews (use admin endpoint)."
          },
          "response": []
        },
        {
          "name": "Admin - Delete Any Review",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/reviews/{{reviewId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "reviews", "{{reviewId}}"]
            },
            "description": "Admin-only endpoint to delete any review by reviewId. Use this for moderation purposes (spam, inappropriate content, etc.). Automatically recalculates course rating cache."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Modules",
      "item": [
        {
          "name": "Get Modules by Course",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/modules/course/{{courseId}}?status=published&isPublished=true",
              "host": ["{{baseUrl}}"],
              "path": ["api", "modules", "course", "{{courseId}}"],
              "query": [
                {
                  "key": "status",
                  "value": "published",
                  "description": "draft | published | archived"
                },
                {
                  "key": "isPublished",
                  "value": "true",
                  "description": "true | false"
                }
              ]
            },
            "description": "Get all modules for a course with lessons"
          },
          "response": []
        },
        {
          "name": "Get Module by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/modules/{{moduleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "modules", "{{moduleId}}"]
            },
            "description": "Get module by ID with lessons and navigation"
          },
          "response": []
        },
        {
          "name": "Get Module by Slug",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/modules/course/{{courseId}}/slug/introduction",
              "host": ["{{baseUrl}}"],
              "path": ["api", "modules", "course", "{{courseId}}", "slug", "introduction"]
            },
            "description": "Get module by slug within a course"
          },
          "response": []
        },
        {
          "name": "Admin",
          "item": [
            {
              "name": "Create Module",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('moduleId', response.data.id);",
                      "    console.log('Module ID saved:', response.data.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"courseId\": \"{{courseId}}\",\n    \"title\": \"Introduction to Yoga\",\n    \"slug\": \"introduction-to-yoga\",\n    \"description\": \"This module covers the basics of yoga philosophy and essential poses\",\n    \"sequence\": 1,\n    \"duration\": 120,\n    \"metadata\": {\n        \"difficulty\": \"beginner\",\n        \"estimatedTime\": \"2 hours\"\n    }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/modules",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "modules"]
                },
                "description": "Create a new module (Admin/Trainer)"
              },
              "response": []
            },
            {
              "name": "Update Module",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"title\": \"Introduction to Yoga - Updated\",\n    \"description\": \"Updated description with more details\",\n    \"sequence\": 1\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/modules/{{moduleId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "modules", "{{moduleId}}"]
                },
                "description": "Update module (Admin/Trainer)"
              },
              "response": []
            },
            {
              "name": "Delete Module",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/modules/{{moduleId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "modules", "{{moduleId}}"]
                },
                "description": "Delete module (Admin/Trainer). Cannot delete if module has lessons."
              },
              "response": []
            },
            {
              "name": "Bulk Update Module Sequences",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"updates\": [\n        { \"id\": \"module-id-1\", \"sequence\": 1 },\n        { \"id\": \"module-id-2\", \"sequence\": 2 },\n        { \"id\": \"module-id-3\", \"sequence\": 3 }\n    ]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/modules/sequences",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "modules", "sequences"]
                },
                "description": "Update multiple module sequences at once"
              },
              "response": []
            },
            {
              "name": "Update Module Status",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"status\": \"published\",\n    \"updateLessons\": false\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/modules/{{moduleId}}/status",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "modules", "{{moduleId}}", "status"]
                },
                "description": "Update module status (draft/published/archived). Set updateLessons=true to also update all lessons in the module."
              },
              "response": []
            },
            {
              "name": "Update Module Duration",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/modules/{{moduleId}}/duration",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "modules", "{{moduleId}}", "duration"]
                },
                "description": "Recalculate and update module duration from its lessons"
              },
              "response": []
            }
          ]
        }
      ]
    },
    {
      "name": "Lessons",
      "item": [
        {
          "name": "Get Lessons by Course",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lessons/course/{{courseId}}?moduleId=&type=video&status=published&isFree=false",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lessons", "course", "{{courseId}}"],
              "query": [
                {
                  "key": "moduleId",
                  "value": "",
                  "description": "Optional: Filter by specific module ID, leave empty for all lessons, or 'null' for moduleId = null"
                },
                {
                  "key": "type",
                  "value": "video",
                  "description": "Optional: Filter by type - video | text | quiz | assignment"
                },
                {
                  "key": "status",
                  "value": "published",
                  "description": "Optional: Filter by status - draft | published | archived"
                },
                {
                  "key": "isFree",
                  "value": "false",
                  "description": "Optional: Filter free lessons - true | false"
                }
              ]
            },
            "description": "Get all lessons for a course. Includes lesson description and attachments. Supports filtering by module, type, status, and free status."
          },
          "response": []
        },
        {
          "name": "Get Free Lessons",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lessons/course/{{courseId}}/free",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lessons", "course", "{{courseId}}", "free"]
            },
            "description": "Get free/preview lessons for a course (public endpoint - no authentication required). Useful for course previews."
          },
          "response": []
        },
        {
          "name": "Get Lessons by Module",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lessons/module/{{moduleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lessons", "module", "{{moduleId}}"]
            },
            "description": "Get all lessons within a specific module, ordered by sequence. Includes lesson description and attachments."
          },
          "response": []
        },
        {
          "name": "Get Lesson by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lessons/{{lessonId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lessons", "{{lessonId}}"]
            },
            "description": "Get lesson by ID with full details including description, attachments, and navigation (next/previous lesson info). Includes related video/text content."
          },
          "response": []
        },
        {
          "name": "Get Lesson by Slug",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lessons/course/{{courseId}}/slug/welcome-to-yoga",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lessons", "course", "{{courseId}}", "slug", "welcome-to-yoga"]
            },
            "description": "Get lesson by slug within a course. Useful for SEO-friendly URLs. Includes description, attachments, and navigation."
          },
          "response": []
        },
        {
          "name": "Get Lesson Description",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lessons/{{lessonId}}/description",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lessons", "{{lessonId}}", "description"]
            },
            "description": "Get detailed lesson description. Returns 404 if no description exists for this lesson. Description is also included in lesson detail endpoints."
          },
          "response": []
        },
        {
          "name": "Get Lesson Attachments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/lessons/{{lessonId}}/attachments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "lessons", "{{lessonId}}", "attachments"]
            },
            "description": "Get all attachments for a lesson, ordered by sequence. Returns empty array if no attachments. Attachments are also included in lesson detail endpoints."
          },
          "response": []
        },
        {
          "name": "Admin",
          "item": [
            {
              "name": "Create Video Lesson",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "// Auto-save lesson ID to collection variable",
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('lessonId', response.data.id);",
                      "    console.log('âœ… Lesson ID saved:', response.data.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"courseId\": \"{{courseId}}\",\n    \"moduleId\": \"{{moduleId}}\",\n    \"videoId\": \"{{videoId}}\",\n    \"title\": \"Welcome to Yoga\",\n    \"slug\": \"welcome-to-yoga\",\n    \"description\": \"An introductory video about yoga philosophy and benefits\",\n    \"sequence\": 1,\n    \"duration\": 900,\n    \"isFree\": true,\n    \"isMandatory\": true,\n    \"status\": \"published\",\n    \"metadata\": {\n        \"difficulty\": \"beginner\",\n        \"language\": \"English\",\n        \"tags\": [\"introduction\", \"philosophy\", \"basics\"]\n    }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/lessons",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "lessons"]
                },
                "description": "Create a video lesson (type auto-detected by presence of videoId). Set moduleId to null for direct course lessons. Duration in seconds."
              },
              "response": []
            },
            {
              "name": "Create Text Lesson",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"courseId\": \"{{courseId}}\",\n    \"moduleId\": null,\n    \"textContent\": \"# Yoga Philosophy\\n\\nYoga is an ancient practice that combines physical postures, breathing exercises, and meditation to promote physical, mental, and spiritual well-being.\\n\\n## The Eight Limbs of Yoga\\n\\n1. **Yama** (Moral disciplines) - Non-violence, truthfulness, non-stealing, celibacy, non-possessiveness\\n2. **Niyama** (Positive duties) - Cleanliness, contentment, austerity, self-study, surrender\\n3. **Asana** (Postures) - Physical poses to prepare body for meditation\\n4. **Pranayama** (Breath control) - Breathing exercises to control life force\\n5. **Pratyahara** (Withdrawal of senses) - Directing attention inward\\n6. **Dharana** (Concentration) - Single-pointed focus\\n7. **Dhyana** (Meditation) - Uninterrupted flow of concentration\\n8. **Samadhi** (Enlightenment) - State of bliss and union\\n\\n## Benefits of Regular Practice\\n\\n- Improved flexibility and strength\\n- Better posture and balance\\n- Reduced stress and anxiety\\n- Enhanced mental clarity\\n- Better sleep quality\\n\\n> _\\\"Yoga is the journey of the self, through the self, to the self.\\\"_ - Bhagavad Gita\",\n    \"title\": \"Understanding Yoga Philosophy\",\n    \"slug\": \"understanding-yoga-philosophy\",\n    \"description\": \"A comprehensive guide to the philosophical foundations of yoga, including the Eight Limbs and core principles\",\n    \"sequence\": 2,\n    \"estimatedReadTime\": 10,\n    \"isFree\": false,\n    \"isMandatory\": true,\n    \"status\": \"published\",\n    \"metadata\": {\n        \"difficulty\": \"beginner\",\n        \"language\": \"English\",\n        \"topics\": [\"philosophy\", \"eight limbs\", \"meditation\", \"principles\"]\n    }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/lessons",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "lessons"]
                },
                "description": "Create a text lesson (type auto-detected by presence of textContent). Supports Markdown formatting. estimatedReadTime in minutes."
              },
              "response": []
            },
            {
              "name": "Update Lesson",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"title\": \"Welcome to Yoga - Extended Edition\",\n    \"description\": \"An updated and extended introductory video with additional content on breathing techniques\",\n    \"duration\": 1200,\n    \"isFree\": false,\n    \"status\": \"published\",\n    \"metadata\": {\n        \"difficulty\": \"beginner\",\n        \"language\": \"English\",\n        \"tags\": [\"introduction\", \"philosophy\", \"breathing\", \"pranayama\"],\n        \"lastUpdated\": \"2024-01-15\"\n    }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/lessons/{{lessonId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "lessons", "{{lessonId}}"]
                },
                "description": "Update lesson details. Can update title, description, duration, status, metadata. Cannot change lesson type or linked video/text content ID."
              },
              "response": []
            },
            {
              "name": "Delete Lesson",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/lessons/{{lessonId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "lessons", "{{lessonId}}"]
                },
                "description": "Delete lesson permanently. Also deletes associated description and all attachments (cascade delete). Cannot be undone."
              },
              "response": []
            },
            {
              "name": "Bulk Update Lesson Sequences",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"updates\": [\n        { \"id\": \"{{lessonId}}\", \"sequence\": 1 },\n        { \"id\": \"lesson-id-2\", \"sequence\": 2 },\n        { \"id\": \"lesson-id-3\", \"sequence\": 3 },\n        { \"id\": \"lesson-id-4\", \"sequence\": 4 }\n    ]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/lessons/sequences",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "lessons", "sequences"]
                },
                "description": "Update multiple lesson display orders at once. Useful for drag-and-drop reordering in UI. All lesson IDs must be valid."
              },
              "response": []
            },
            {
              "name": "Update Lesson Status",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"status\": \"published\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/lessons/{{lessonId}}/status",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "lessons", "{{lessonId}}", "status"]
                },
                "description": "Update only the lesson status. Valid values: draft (work in progress), published (visible to users), archived (hidden but preserved)."
              },
              "response": []
            },
            {
              "name": "Descriptions",
              "item": [
                {
                  "name": "Upsert Lesson Description",
                  "request": {
                    "auth": {
                      "type": "bearer",
                      "bearer": [
                        {
                          "key": "token",
                          "value": "{{authToken}}",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "PUT",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/json"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"textContent\": \"# Welcome to the Yoga Fundamentals Course\\n\\nThis comprehensive lesson will guide you through the essential principles of yoga practice, perfect for beginners and those looking to deepen their understanding.\\n\\n## What You'll Learn\\n\\n- **Foundation Poses**: Master basic asanas including Mountain Pose, Downward Dog, and Child's Pose\\n- **Breathing Techniques**: Learn Ujjayi breath and its calming benefits\\n- **Alignment Principles**: Understand proper body mechanics to prevent injury\\n- **Mindfulness Practice**: Connect breath with movement\\n\\n## Course Materials\\n\\nPlease refer to the attached PDF guide and reference chart in the attachments section below.\\n\\n## Prerequisites\\n\\nNo prior yoga experience required! All you need is:\\n- Comfortable clothing\\n- A yoga mat or soft surface\\n- An open mind and willingness to learn\\n\\n## Useful Resources\\n\\n- [Yoga Alliance - Beginner's Guide](https://www.yogaalliance.org/learn)\\n- [Scientific Benefits of Yoga](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3193654/)\\n- [Recommended Props Guide](https://www.yogajournal.com/yoga-101/props/)\\n\\n## Practice Schedule\\n\\nFor best results, practice this sequence 3-4 times per week, allowing at least one rest day between sessions.\\n\\n---\\n\\n_Remember: Yoga is a personal journey. Listen to your body and move at your own pace._\\n\\nðŸ’¡ **Pro Tip**: Keep a yoga journal to track your progress and insights!\"\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/api/lessons/{{lessonId}}/description",
                      "host": ["{{baseUrl}}"],
                      "path": ["api", "lessons", "{{lessonId}}", "description"]
                    },
                    "description": "Create or update lesson description (upsert). Supports rich text with Markdown formatting, links, lists, headings, bold/italic text. Perfect for detailed explanations like YouTube descriptions. One-to-one relation - replaces existing description if present."
                  },
                  "response": []
                },
                {
                  "name": "Delete Lesson Description",
                  "request": {
                    "auth": {
                      "type": "bearer",
                      "bearer": [
                        {
                          "key": "token",
                          "value": "{{authToken}}",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "DELETE",
                    "header": [],
                    "url": {
                      "raw": "{{baseUrl}}/api/lessons/{{lessonId}}/description",
                      "host": ["{{baseUrl}}"],
                      "path": ["api", "lessons", "{{lessonId}}", "description"]
                    },
                    "description": "Delete lesson description permanently. The lesson itself remains intact. Use this when you want to remove detailed description but keep the lesson's short description field."
                  },
                  "response": []
                }
              ]
            },
            {
              "name": "Attachments",
              "item": [
                {
                  "name": "Add Lesson Attachment",
                  "event": [
                    {
                      "listen": "test",
                      "script": {
                        "exec": [
                          "// Auto-save attachment ID to collection variable",
                          "if (pm.response.code === 201) {",
                          "    const response = pm.response.json();",
                          "    pm.collectionVariables.set('attachmentId', response.data.id);",
                          "    console.log('âœ… Attachment ID saved:', response.data.id);",
                          "}"
                        ],
                        "type": "text/javascript"
                      }
                    }
                  ],
                  "request": {
                    "auth": {
                      "type": "bearer",
                      "bearer": [
                        {
                          "key": "token",
                          "value": "{{authToken}}",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "POST",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/json"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"title\": \"Yoga Poses Reference Guide\",\n    \"fileUrl\": \"https://storage.example.com/files/yoga-poses-guide.pdf\",\n    \"fileName\": \"yoga-poses-guide.pdf\",\n    \"fileSize\": 2048576,\n    \"mimeType\": \"application/pdf\",\n    \"sequence\": 0\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/api/lessons/{{lessonId}}/attachments",
                      "host": ["{{baseUrl}}"],
                      "path": ["api", "lessons", "{{lessonId}}", "attachments"]
                    },
                    "description": "Add attachment to lesson (upload file to storage first, then save metadata here). Type is auto-detected from mimeType:\n- application/pdf â†’ pdf\n- image/* â†’ image\n- application/msword, application/vnd.* â†’ document\n- application/zip, application/x-zip* â†’ zip\n- other â†’ other\n\nSequence auto-increments if not provided. fileSize in bytes."
                  },
                  "response": []
                },
                {
                  "name": "Add Image Attachment Example",
                  "request": {
                    "auth": {
                      "type": "bearer",
                      "bearer": [
                        {
                          "key": "token",
                          "value": "{{authToken}}",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "POST",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/json"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"title\": \"Proper Alignment Chart\",\n    \"fileUrl\": \"https://storage.example.com/images/alignment-chart.png\",\n    \"fileName\": \"alignment-chart.png\",\n    \"fileSize\": 524288,\n    \"mimeType\": \"image/png\",\n    \"sequence\": 1\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/api/lessons/{{lessonId}}/attachments",
                      "host": ["{{baseUrl}}"],
                      "path": ["api", "lessons", "{{lessonId}}", "attachments"]
                    },
                    "description": "Example: Add image attachment (PNG/JPG/GIF/WebP). Type will be auto-detected as 'image' from mimeType."
                  },
                  "response": []
                },
                {
                  "name": "Add Document Attachment Example",
                  "request": {
                    "auth": {
                      "type": "bearer",
                      "bearer": [
                        {
                          "key": "token",
                          "value": "{{authToken}}",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "POST",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/json"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"title\": \"Practice Schedule Template\",\n    \"fileUrl\": \"https://storage.example.com/docs/practice-schedule.docx\",\n    \"fileName\": \"practice-schedule.docx\",\n    \"fileSize\": 30720,\n    \"mimeType\": \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"sequence\": 2\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/api/lessons/{{lessonId}}/attachments",
                      "host": ["{{baseUrl}}"],
                      "path": ["api", "lessons", "{{lessonId}}", "attachments"]
                    },
                    "description": "Example: Add document attachment (Word/Excel/PowerPoint). Type will be auto-detected as 'document' from mimeType."
                  },
                  "response": []
                },
                {
                  "name": "Get Attachment by ID",
                  "request": {
                    "auth": {
                      "type": "bearer",
                      "bearer": [
                        {
                          "key": "token",
                          "value": "{{authToken}}",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "GET",
                    "header": [],
                    "url": {
                      "raw": "{{baseUrl}}/api/lessons/attachments/{{attachmentId}}",
                      "host": ["{{baseUrl}}"],
                      "path": ["api", "lessons", "attachments", "{{attachmentId}}"]
                    },
                    "description": "Get single attachment details by ID. Useful for download links or preview functionality."
                  },
                  "response": []
                },
                {
                  "name": "Update Attachment",
                  "request": {
                    "auth": {
                      "type": "bearer",
                      "bearer": [
                        {
                          "key": "token",
                          "value": "{{authToken}}",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "PUT",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/json"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"title\": \"Yoga Poses Reference Guide (Updated)\",\n    \"fileUrl\": \"https://storage.example.com/files/yoga-poses-guide-v2.pdf\",\n    \"fileName\": \"yoga-poses-guide-v2.pdf\",\n    \"fileSize\": 3145728,\n    \"mimeType\": \"application/pdf\",\n    \"sequence\": 0\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/api/lessons/attachments/{{attachmentId}}",
                      "host": ["{{baseUrl}}"],
                      "path": ["api", "lessons", "attachments", "{{attachmentId}}"]
                    },
                    "description": "Update attachment metadata. Can update title, fileUrl, fileName, fileSize, mimeType, or sequence. Type is re-detected from new mimeType if changed."
                  },
                  "response": []
                },
                {
                  "name": "Delete Attachment",
                  "request": {
                    "auth": {
                      "type": "bearer",
                      "bearer": [
                        {
                          "key": "token",
                          "value": "{{authToken}}",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "DELETE",
                    "header": [],
                    "url": {
                      "raw": "{{baseUrl}}/api/lessons/attachments/{{attachmentId}}",
                      "host": ["{{baseUrl}}"],
                      "path": ["api", "lessons", "attachments", "{{attachmentId}}"]
                    },
                    "description": "Delete a specific attachment permanently. Does not delete the actual file from storage - handle that separately in your frontend/storage service."
                  },
                  "response": []
                },
                {
                  "name": "Bulk Update Attachment Sequences",
                  "request": {
                    "auth": {
                      "type": "bearer",
                      "bearer": [
                        {
                          "key": "token",
                          "value": "{{authToken}}",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "PATCH",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "application/json"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"updates\": [\n        { \"id\": \"{{attachmentId}}\", \"sequence\": 0 },\n        { \"id\": \"attachment-id-2\", \"sequence\": 1 },\n        { \"id\": \"attachment-id-3\", \"sequence\": 2 },\n        { \"id\": \"attachment-id-4\", \"sequence\": 3 }\n    ]\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/api/lessons/attachments/sequences",
                      "host": ["{{baseUrl}}"],
                      "path": ["api", "lessons", "attachments", "sequences"]
                    },
                    "description": "Update multiple attachment display orders at once. Useful for drag-and-drop reordering in UI. All attachment IDs must belong to the same lesson."
                  },
                  "response": []
                },
                {
                  "name": "Delete All Lesson Attachments",
                  "request": {
                    "auth": {
                      "type": "bearer",
                      "bearer": [
                        {
                          "key": "token",
                          "value": "{{authToken}}",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "DELETE",
                    "header": [],
                    "url": {
                      "raw": "{{baseUrl}}/api/lessons/{{lessonId}}/attachments/all",
                      "host": ["{{baseUrl}}"],
                      "path": ["api", "lessons", "{{lessonId}}", "attachments", "all"]
                    },
                    "description": "Delete all attachments for a lesson at once. Useful when resetting lesson materials. Does not delete actual files from storage."
                  },
                  "response": []
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "Sessions",
      "item": [
        {
          "name": "Get Active Sessions",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/sessions/active",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sessions", "active"]
            },
            "description": "Get all active sessions for current user"
          },
          "response": []
        },
        {
          "name": "Get All Sessions",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/sessions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sessions"]
            },
            "description": "Get all sessions (including expired) for current user"
          },
          "response": []
        },
        {
          "name": "Logout Current Session",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/sessions/current",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sessions", "current"]
            },
            "description": "Logout from current session"
          },
          "response": []
        },
        {
          "name": "Logout Specific Session",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/sessions/{{sessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sessions", "{{sessionId}}"]
            },
            "description": "Logout from a specific session"
          },
          "response": []
        },
        {
          "name": "Logout All Sessions",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/sessions/all/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sessions", "all", "logout"]
            },
            "description": "Logout from all sessions"
          },
          "response": []
        },
        {
          "name": "Cleanup Expired Sessions",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/sessions/cleanup",
              "host": ["{{baseUrl}}"],
              "path": ["api", "sessions", "cleanup"]
            },
            "description": "Cleanup expired sessions (Admin only)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Progress Tracking",
      "item": [
        {
          "name": "User Progress",
          "item": [
            {
              "name": "Mark Lesson Complete",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"currentTimestamp\": 120\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/progress/lessons/{{lessonId}}/complete",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "lessons", "{{lessonId}}", "complete"]
                },
                "description": "Mark a lesson as completed. Automatically recalculates course progress for the user. Optional currentTimestamp field tracks watch position in seconds."
              },
              "response": []
            },
            {
              "name": "Update Lesson Timestamp",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"currentTimestamp\": 300\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/progress/lessons/{{lessonId}}/timestamp",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "lessons", "{{lessonId}}", "timestamp"]
                },
                "description": "Update watch progress for a lesson. currentTimestamp in seconds. Use this to save user's current position in video lessons."
              },
              "response": []
            },
            {
              "name": "Get Lesson Progress",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/lessons/{{lessonId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "lessons", "{{lessonId}}"]
                },
                "description": "Get user's progress for a specific lesson. Returns completion status, timestamp, and completion date."
              },
              "response": []
            },
            {
              "name": "Get Course Lesson Progress",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/courses/{{courseId}}/lessons",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "courses", "{{courseId}}", "lessons"]
                },
                "description": "Get all lesson progress for a course. Returns list of completed lessons with timestamps."
              },
              "response": []
            },
            {
              "name": "Get Course Progress",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/courses/{{courseId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "courses", "{{courseId}}"]
                },
                "description": "Get user's overall progress for a course. Returns percentage, completion status, and last completed lesson."
              },
              "response": []
            },
            {
              "name": "Get Course Progress Details",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/courses/{{courseId}}/details",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "courses", "{{courseId}}", "details"]
                },
                "description": "Get detailed course progress with lesson breakdown. Includes courseProgress, totalLessons, completedLessons, and lessonProgress array."
              },
              "response": []
            },
            {
              "name": "Get All Course Progress",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/courses",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "courses"]
                },
                "description": "Get all course progress for authenticated user. Returns array of course progress with course details."
              },
              "response": []
            },
            {
              "name": "Get Completed Courses",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/completed",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "completed"]
                },
                "description": "Get all completed courses for user (100% progress). Includes certificate availability info."
              },
              "response": []
            },
            {
              "name": "Get In-Progress Courses",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/in-progress",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "in-progress"]
                },
                "description": "Get all in-progress courses for user (progress > 0 and < 100). Useful for 'Continue Learning' sections."
              },
              "response": []
            },
            {
              "name": "Get Progress Summary",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/summary",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "summary"]
                },
                "description": "Get overall progress summary: totalCourses, completedCourses, inProgressCourses, totalLessonsCompleted."
              },
              "response": []
            }
          ]
        },
        {
          "name": "Admin Progress Management",
          "item": [
            {
              "name": "Get Course Progress Stats",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/courses/{{courseId}}/stats",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "courses", "{{courseId}}", "stats"]
                },
                "description": "Get progress statistics for a course (Admin only). Returns: totalEnrolled, completed, inProgress, averageProgress."
              },
              "response": []
            },
            {
              "name": "Reset User Course Progress",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/users/{{userId}}/courses/{{courseId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "users", "{{userId}}", "courses", "{{courseId}}"]
                },
                "description": "Reset user's progress for a course (Admin only). Deletes all lesson progress and course progress. Does NOT revoke certificates."
              },
              "response": []
            },
            {
              "name": "Recalculate User Course Progress",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/users/{{userId}}/courses/{{courseId}}/recalculate",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "api",
                    "progress",
                    "users",
                    "{{userId}}",
                    "courses",
                    "{{courseId}}",
                    "recalculate"
                  ]
                },
                "description": "Manually recalculate progress for a specific user in a course (Admin only). Useful for fixing inconsistencies."
              },
              "response": []
            },
            {
              "name": "Recalculate All Users Progress",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/progress/courses/{{courseId}}/recalculate",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "progress", "courses", "{{courseId}}", "recalculate"]
                },
                "description": "Recalculate progress for ALL users in a course (Admin only). Automatically triggered when lessons are added/deleted. Use manually to fix bulk data issues."
              },
              "response": []
            }
          ]
        }
      ]
    },
    {
      "name": "Videos",
      "item": [
        {
          "name": "Admin",
          "item": [
            {
              "name": "Create Video",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('videoId', response.data.id);",
                      "    console.log('Video ID saved:', response.data.id);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"title\": \"Introduction to Yoga\",\n    \"thumbnailUrl\": \"https://example.com/thumbnail.jpg\",\n    \"storageKey\": \"videos/intro-yoga.mp4\",\n    \"playbackUrl\": \"https://example.com/videos/intro-yoga.mp4\",\n    \"status\": \"published\",\n    \"duration\": 600,\n    \"metadata\": {\n        \"resolution\": \"1080p\",\n        \"format\": \"mp4\",\n        \"size\": 52428800\n    }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/videos",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "videos"]
                },
                "description": "Create a new video (Admin only)"
              },
              "response": []
            },
            {
              "name": "Get All Videos",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/videos?status=published&limit=20&offset=0",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "videos"],
                  "query": [
                    {
                      "key": "status",
                      "value": "published",
                      "description": "published | draft | processing | failed"
                    },
                    {
                      "key": "limit",
                      "value": "20"
                    },
                    {
                      "key": "offset",
                      "value": "0"
                    }
                  ]
                },
                "description": "Get all videos with optional filters (Admin only)"
              },
              "response": []
            },
            {
              "name": "Get Video by ID",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/videos/{{videoId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "videos", "{{videoId}}"]
                },
                "description": "Get video by ID (Admin only)"
              },
              "response": []
            },
            {
              "name": "Update Video",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"title\": \"Introduction to Yoga - Updated\",\n    \"status\": \"published\",\n    \"duration\": 720,\n    \"metadata\": {\n        \"resolution\": \"4K\",\n        \"format\": \"mp4\"\n    }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/videos/{{videoId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "videos", "{{videoId}}"]
                },
                "description": "Update video details (Admin only)"
              },
              "response": []
            },
            {
              "name": "Update Video Status",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"status\": \"published\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/videos/{{videoId}}/status",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "videos", "{{videoId}}", "status"]
                },
                "description": "Update only the video status (Admin only)"
              },
              "response": []
            },
            {
              "name": "Delete Video",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/videos/{{videoId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "videos", "{{videoId}}"]
                },
                "description": "Delete a single video (Admin only)"
              },
              "response": []
            },
            {
              "name": "Bulk Delete Videos",
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{authToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "DELETE",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"ids\": [\"video-id-1\", \"video-id-2\", \"video-id-3\"]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/videos/bulk/delete",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "videos", "bulk", "delete"]
                },
                "description": "Delete multiple videos at once (Admin only)"
              },
              "response": []
            },
            {
              "name": "Transcode Complete Webhook",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"videoId\": \"{{videoId}}\",\n    \"status\": \"published\",\n    \"playbackUrl\": \"https://example.com/videos/transcoded.m3u8\",\n    \"metadata\": {\n        \"duration\": 600,\n        \"resolution\": \"1080p\",\n        \"format\": \"hls\"\n    }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/videos/transcode-complete",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "videos", "transcode-complete"]
                },
                "description": "Webhook endpoint for video transcoding service to notify completion"
              },
              "response": []
            }
          ]
        }
      ]
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "categoryId",
      "value": "",
      "type": "string"
    },
    {
      "key": "courseId",
      "value": "",
      "type": "string"
    },
    {
      "key": "videoId",
      "value": "",
      "type": "string"
    },
    {
      "key": "trainerId",
      "value": "",
      "type": "string"
    },
    {
      "key": "moduleId",
      "value": "",
      "type": "string"
    },
    {
      "key": "lessonId",
      "value": "",
      "type": "string"
    },
    {
      "key": "sessionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "attachmentId",
      "value": "",
      "type": "string"
    },
    {
      "key": "reviewId",
      "value": "",
      "type": "string"
    }
  ]
}

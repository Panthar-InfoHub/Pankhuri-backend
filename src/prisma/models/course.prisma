enum CourseLevel {
  beginner
  intermediate
  advanced
  expert
}

enum CourseStatus {
  active
  inactive
  archived
}

model Course {
  id             String       @id @default(cuid())
  categoryId     String
  trainerId      String
  title          String
  slug           String       @unique
  description    String?      @db.Text
  thumbnailImage String?
  coverImage     String?
  level          CourseLevel  @default(beginner)
  duration       Int? // in minutes
  language       String       @default("en")
  status         CourseStatus @default(active)
  hasCertificate Boolean      @default(false)
  rating         Float        @default(0)
  averageRating  Float        @default(0) // Cached rating from reviews
  totalReviews   Int          @default(0) // Cached review count
  tags           String[]     @default([])
  metadata       Json?
  demoVideoId    String?
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt

  // Relations
  category  Category @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  trainer   Trainer  @relation("TrainerCourses", fields: [trainerId], references: [id], onDelete: Cascade)
  demoVideo Video?   @relation("DemoVideos", fields: [demoVideoId], references: [id], onDelete: Cascade)

  modules        Module[]
  lessons        Lesson[] // Direct lessons (not inside modules)
  courseProgress UserCourseProgress[]
  reviews        CourseReview[]
  certificates   Certificate[]

  @@index([slug])
  @@index([categoryId])
  @@index([trainerId])
  @@index([status])
  @@index([level])
  @@index([language])
}
